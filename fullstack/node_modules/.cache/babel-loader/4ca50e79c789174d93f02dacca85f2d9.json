{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\FullStack\\\\fullStack1\\\\fullstack\\\\src\\\\views\\\\Member.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport memberUtils from \"../utils/membersUtils\";\nimport { useSelector } from \"react-redux\";\nimport subscriptionsUtils from \"../utils/subscriptionsUtils\";\nimport moviesUtils from \"../utils/moviesUtils\";\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\nimport Card from \"@mui/material/Card\";\nimport CardActions from \"@mui/material/CardActions\";\nimport CardContent from \"@mui/material/CardContent\";\nimport Button from \"@mui/material/Button\";\nimport Typography from \"@mui/material/Typography\";\nimport Input from \"@mui/material/Input\";\nimport Container from \"@mui/material/Container\";\nimport Select from \"@mui/material/Select\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport FormControl from \"@mui/material/FormControl\";\nimport MovieCreationTwoToneIcon from \"@mui/icons-material/MovieCreationTwoTone\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MemberComp = props => {\n  _s();\n\n  const [member, setMember] = useState({});\n  const [movie, setMovie] = useState({});\n  const [movies, setMovies] = useState([]);\n  const [watchedMovies, setWatchedMovies] = useState([]);\n  const [editMember, setEditMember] = useState(false);\n  const [subscribe, setSubscribe] = useState(false);\n  const [updatedMember, setUpdatedMember] = useState({});\n  const permissions = useSelector(state => state.user.Permissions);\n  const navigate = useNavigate();\n  const {\n    state\n  } = useLocation();\n  useEffect(() => {\n    async function fetchData() {\n      if (props.member) {\n        setMember(props.member);\n      } else {\n        let member = await memberUtils.getMember(state);\n        setMember(member);\n      }\n    }\n\n    fetchData();\n  }, [props]);\n  useEffect(() => {\n    async function fetchData() {\n      let allMovies = await moviesUtils.allMovies();\n      setMovies(allMovies);\n      let id = props.member ? props.member._id : state;\n      let MoviesWatched = await subscriptionsUtils.getSubscriptionsByMember(id);\n      setWatchedMovies(MoviesWatched);\n    }\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    async function fetchData() {\n      if (props.member) {\n        setMember(props.member);\n      } else {\n        let member = await memberUtils.getMember(state);\n        setMember(member);\n      }\n    }\n\n    fetchData();\n  }, [props]);\n\n  const deleteMember = async () => {\n    let id = props.member ? props.member._id : state;\n    let resp = await memberUtils.deleteMember(id);\n    props.updateMembers(resp);\n  };\n\n  const updateMember = async () => {\n    let resp = await memberUtils.EditMember(props.member._id, updatedMember);\n    setEditMember(!editMember);\n    props.updateMembers(resp);\n  };\n\n  const Subscribe = async () => {\n    let subscription = {\n      MemberId: member._id,\n      Movies: {\n        movieId: movie.id,\n        date: movie.date\n      }\n    };\n    let resp = await subscriptionsUtils.AddSubscriptions(subscription);\n    setSubscribe(!subscribe);\n    setWatchedMovies(resp);\n  };\n\n  const getMovieName = id => {\n    let movieData = movies.filter(x => x._id === id);\n    return movieData[0].Name;\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    children: /*#__PURE__*/_jsxDEV(CardContent, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"400px\",\n          borderWidth: \"3px\",\n          borderStyle: \"solid\",\n          borderColor: \"gray\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          gutterBottom: true,\n          component: \"div\",\n          children: [\"Name : \", member.Name, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 34\n          }, this), \"Email : \", member.Email, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 36\n          }, this), \"City : \", member.City, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Container, {\n          component: \"span\",\n          sx: {\n            p: 2,\n            border: \"1px dashed grey\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \" Movies Watched : \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this), watchedMovies.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: watchedMovies.map(item => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(MovieCreationTwoToneIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: () => {\n                    navigate(\"/movie/\" + item.Movies.movieId, {\n                      state: item.Movies.movieId\n                    });\n                  },\n                  children: getMovieName(item.Movies.movieId)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 23\n                }, this), \",\", item.Movies.date, \" \"]\n              }, item._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            size: \"small\",\n            color: \"success\",\n            onClick: e => setSubscribe(!subscribe),\n            children: \"Subscribe to new movie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this), subscribe && /*#__PURE__*/_jsxDEV(Container, {\n            component: \"span\",\n            sx: {\n              p: 2,\n              border: \"1px dashed grey\"\n            },\n            children: [\"Movie :\", /*#__PURE__*/_jsxDEV(FormControl, {\n              variant: \"standard\",\n              sx: {\n                m: 1,\n                minWidth: 120\n              },\n              children: /*#__PURE__*/_jsxDEV(Select, {\n                labelId: \"demo-simple-select-label\",\n                id: \"demo-simple-select\",\n                value: movie.Name,\n                label: \"Movie\",\n                onChange: e => console.log(e),\n                children: movies.map(item => {\n                  return /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: item._id,\n                    children: [item.Name, \" \"]\n                  }, item._id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 158,\n                    columnNumber: 25\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 17\n            }, this), \"Date :\", \" \", /*#__PURE__*/_jsxDEV(Input, {\n              required: true,\n              type: \"date\",\n              name: \"Date\",\n              onChange: e => setMovie({ ...movie,\n                date: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              color: \"success\",\n              variant: \"outlined\",\n              onClick: Subscribe,\n              children: \"Subscribe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              color: \"inherit\",\n              size: \"small\",\n              onClick: e => setSubscribe(!subscribe),\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n          children: [permissions.includes(\"Update Subscriptions\") && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              variant: \"outlined\",\n              onClick: e => setEditMember(!editMember),\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this), permissions.includes(\"Delete Subscriptions\") && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              variant: \"outlined\",\n              color: \"error\",\n              onClick: deleteMember,\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: editMember && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: \"300px\",\n              borderWidth: \"3px\",\n              borderStyle: \"solid\",\n              borderColor: \"darkGray\"\n            },\n            children: [\"Name :\", \" \", /*#__PURE__*/_jsxDEV(Input, {\n              name: \"Name\",\n              defaultValue: member.Name,\n              onChange: e => setUpdatedMember({ ...updatedMember,\n                Name: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 17\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this), \"Email :\", \" \", /*#__PURE__*/_jsxDEV(Input, {\n              name: \"Email\",\n              defaultValue: member.Email,\n              onChange: e => setUpdatedMember({ ...updatedMember,\n                Email: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this), \"City :\", \" \", /*#__PURE__*/_jsxDEV(Input, {\n              name: \"City\",\n              defaultValue: member.City,\n              onChange: e => setUpdatedMember({ ...updatedMember,\n                City: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              color: \"success\",\n              variant: \"outlined\",\n              onClick: updateMember,\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              variant: \"outlined\",\n              color: \"inherit\",\n              onClick: e => setEditMember(!editMember),\n              children: \"Cencel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MemberComp, \"VXTt7nG9rtxpBBEmOOUshd7URK8=\", false, function () {\n  return [useSelector, useNavigate, useLocation];\n});\n\n_c = MemberComp;\nexport default MemberComp;\n\nvar _c;\n\n$RefreshReg$(_c, \"MemberComp\");","map":{"version":3,"sources":["C:/Users/User/FullStack/fullStack1/fullstack/src/views/Member.js"],"names":["useState","useEffect","memberUtils","useSelector","subscriptionsUtils","moviesUtils","Link","useNavigate","useLocation","Card","CardActions","CardContent","Button","Typography","Input","Container","Select","MenuItem","FormControl","MovieCreationTwoToneIcon","MemberComp","props","member","setMember","movie","setMovie","movies","setMovies","watchedMovies","setWatchedMovies","editMember","setEditMember","subscribe","setSubscribe","updatedMember","setUpdatedMember","permissions","state","user","Permissions","navigate","fetchData","getMember","allMovies","id","_id","MoviesWatched","getSubscriptionsByMember","deleteMember","resp","updateMembers","updateMember","EditMember","Subscribe","subscription","MemberId","Movies","movieId","date","AddSubscriptions","getMovieName","movieData","filter","x","Name","width","borderWidth","borderStyle","borderColor","Email","City","p","border","length","map","item","e","m","minWidth","console","log","target","value","includes"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport memberUtils from \"../utils/membersUtils\";\r\nimport { useSelector } from \"react-redux\";\r\nimport subscriptionsUtils from \"../utils/subscriptionsUtils\";\r\nimport moviesUtils from \"../utils/moviesUtils\";\r\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Input from \"@mui/material/Input\";\r\nimport Container from \"@mui/material/Container\";\r\nimport Select from \"@mui/material/Select\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport MovieCreationTwoToneIcon from \"@mui/icons-material/MovieCreationTwoTone\";\r\n\r\nconst MemberComp = (props) => {\r\n  const [member, setMember] = useState({});\r\n  const [movie, setMovie] = useState({});\r\n  const [movies, setMovies] = useState([]);\r\n  const [watchedMovies, setWatchedMovies] = useState([]);\r\n  const [editMember, setEditMember] = useState(false);\r\n  const [subscribe, setSubscribe] = useState(false);\r\n  const [updatedMember, setUpdatedMember] = useState({});\r\n  const permissions = useSelector((state) => state.user.Permissions);\r\n  const navigate = useNavigate();\r\n  const { state } = useLocation();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      if (props.member) {\r\n        setMember(props.member);\r\n      } else {\r\n        let member = await memberUtils.getMember(state);\r\n        setMember(member);\r\n      }\r\n    }\r\n    fetchData();\r\n  }, [props]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      let allMovies = await moviesUtils.allMovies();\r\n      setMovies(allMovies);\r\n      let id = props.member ? props.member._id : state;\r\n      let MoviesWatched = await subscriptionsUtils.getSubscriptionsByMember(id);\r\n      setWatchedMovies(MoviesWatched);\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      if (props.member) {\r\n        setMember(props.member);\r\n      } else {\r\n        let member = await memberUtils.getMember(state);\r\n        setMember(member);\r\n      }\r\n    }\r\n    fetchData();\r\n  }, [props]);\r\n\r\n  const deleteMember = async () => {\r\n    let id = props.member ? props.member._id : state;\r\n    let resp = await memberUtils.deleteMember(id);\r\n    props.updateMembers(resp);\r\n  };\r\n\r\n  const updateMember = async () => {\r\n    let resp = await memberUtils.EditMember(props.member._id, updatedMember);\r\n    setEditMember(!editMember);\r\n    props.updateMembers(resp);\r\n  };\r\n\r\n  const Subscribe = async () => {\r\n    let subscription = {\r\n      MemberId: member._id,\r\n      Movies: { movieId: movie.id, date: movie.date },\r\n    };\r\n    let resp = await subscriptionsUtils.AddSubscriptions(subscription);\r\n    setSubscribe(!subscribe);\r\n    setWatchedMovies(resp);\r\n  };\r\n\r\n  const getMovieName = (id) => {\r\n    let movieData = movies.filter((x) => x._id === id);\r\n    return movieData[0].Name;\r\n  };\r\n\r\n  return (\r\n    <Card>\r\n      <CardContent>\r\n        <div\r\n          style={{\r\n            width: \"400px\",\r\n            borderWidth: \"3px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"gray\",\r\n          }}\r\n        >\r\n          <Typography gutterBottom component=\"div\">\r\n            Name : {member.Name} <br />\r\n            Email : {member.Email} <br />\r\n            City : {member.City} <br />\r\n          </Typography>\r\n\r\n          <Container component=\"span\" sx={{ p: 2, border: \"1px dashed grey\" }}>\r\n            <h4> Movies Watched : </h4>\r\n            {watchedMovies.length > 0 && (\r\n              <ul>\r\n                {watchedMovies.map((item) => {\r\n                  return (\r\n                    <div key={item._id}>\r\n                      <MovieCreationTwoToneIcon />\r\n                      <Button\r\n                        onClick={() => {\r\n                          navigate(\"/movie/\" + item.Movies.movieId, {\r\n                            state: item.Movies.movieId,\r\n                          });\r\n                        }}\r\n                      >\r\n                        {getMovieName(item.Movies.movieId)}\r\n                      </Button>\r\n                      ,{item.Movies.date}{\" \"}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </ul>\r\n            )}\r\n            <Button\r\n              variant=\"contained\"\r\n              size=\"small\"\r\n              color=\"success\"\r\n              onClick={(e) => setSubscribe(!subscribe)}\r\n            >\r\n              Subscribe to new movie\r\n            </Button>\r\n            <br />\r\n            {subscribe && (\r\n              <Container\r\n                component=\"span\"\r\n                sx={{ p: 2, border: \"1px dashed grey\" }}\r\n              >\r\n                Movie :\r\n                <FormControl variant=\"standard\" sx={{ m: 1, minWidth: 120 }}>\r\n                  <Select\r\n                    labelId=\"demo-simple-select-label\"\r\n                    id=\"demo-simple-select\"\r\n                    value={movie.Name}\r\n                    label=\"Movie\"\r\n                    onChange={(e) => console.log(e)}\r\n                  >\r\n                    {movies.map((item) => {\r\n                      return (\r\n                        <MenuItem key={item._id} value={item._id}>\r\n                          {item.Name}{\" \"}\r\n                        </MenuItem>\r\n                      );\r\n                    })}\r\n                  </Select>\r\n                </FormControl>{\" \"}\r\n                <br />\r\n                Date :{\" \"}\r\n                <Input\r\n                  required\r\n                  type=\"date\"\r\n                  name=\"Date\"\r\n                  onChange={(e) => setMovie({ ...movie, date: e.target.value })}\r\n                />\r\n                <br />\r\n                <br />\r\n                <Button\r\n                  size=\"small\"\r\n                  color=\"success\"\r\n                  variant=\"outlined\"\r\n                  onClick={Subscribe}\r\n                >\r\n                  Subscribe\r\n                </Button>\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  color=\"inherit\"\r\n                  size=\"small\"\r\n                  onClick={(e) => setSubscribe(!subscribe)}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n              </Container>\r\n            )}\r\n          </Container>\r\n\r\n          <CardActions>\r\n            {permissions.includes(\"Update Subscriptions\") && (\r\n              <div>\r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  onClick={(e) => setEditMember(!editMember)}\r\n                >\r\n                  Edit\r\n                </Button>\r\n              </div>\r\n            )}\r\n            {permissions.includes(\"Delete Subscriptions\") && (\r\n              <div>\r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  color=\"error\"\r\n                  onClick={deleteMember}\r\n                >\r\n                  Delete\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </CardActions>\r\n          <div>\r\n            {editMember && (\r\n              <div\r\n                style={{\r\n                  width: \"300px\",\r\n                  borderWidth: \"3px\",\r\n                  borderStyle: \"solid\",\r\n                  borderColor: \"darkGray\",\r\n                }}\r\n              >\r\n                Name :{\" \"}\r\n                <Input\r\n                  name=\"Name\"\r\n                  defaultValue={member.Name}\r\n                  onChange={(e) =>\r\n                    setUpdatedMember({ ...updatedMember, Name: e.target.value })\r\n                  }\r\n                />{\" \"}\r\n                <br />\r\n                Email :{\" \"}\r\n                <Input\r\n                  name=\"Email\"\r\n                  defaultValue={member.Email}\r\n                  onChange={(e) =>\r\n                    setUpdatedMember({\r\n                      ...updatedMember,\r\n                      Email: e.target.value,\r\n                    })\r\n                  }\r\n                />\r\n                <br />\r\n                City :{\" \"}\r\n                <Input\r\n                  name=\"City\"\r\n                  defaultValue={member.City}\r\n                  onChange={(e) =>\r\n                    setUpdatedMember({ ...updatedMember, City: e.target.value })\r\n                  }\r\n                />\r\n                <br />\r\n                <Button\r\n                  size=\"small\"\r\n                  color=\"success\"\r\n                  variant=\"outlined\"\r\n                  onClick={updateMember}\r\n                >\r\n                  Save\r\n                </Button>\r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  color=\"inherit\"\r\n                  onClick={(e) => setEditMember(!editMember)}\r\n                >\r\n                  Cencel\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default MemberComp;\r\n"]},"metadata":{},"sourceType":"module"}
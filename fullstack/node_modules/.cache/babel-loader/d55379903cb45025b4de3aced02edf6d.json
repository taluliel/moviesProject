{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\FullStack\\\\fullStack1\\\\fullstack\\\\src\\\\views\\\\main.js\",\n    _s = $RefreshSig$();\n\nimport { Switch, Route, Link } from 'react-router-dom';\nimport { useState } from 'react';\nimport { useSelector } from \"react-redux\";\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport LoginComp from './login';\nimport AllMembersComp from './AllMembers';\nimport AllMoviesComp from './AllMovies';\nimport AllUsersComp from './UsersManagement';\nimport { useDispatch } from \"react-redux\";\nimport memberUtils from '../utils/membersUtils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MainComp() {\n  _s();\n\n  const [user, setUser] = useState({});\n  const [Role, setRole] = useState('');\n  const [permissions, setPermissions] = useState([]);\n  const dispatch = useDispatch();\n  const storeData = useSelector(state => state);\n  useEffect(() => {\n    async function fetchData() {\n      let allMembers = await memberUtils.allMembers();\n      dispatch({\n        type: \"MEMBERS\",\n        payload: allMembers\n      });\n      let allMovies = await moviesUtils.allMovies();\n      dispatch({\n        type: \"MOVIES\",\n        payload: allMovies\n      });\n    }\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    async function fetchData() {\n      setUser(storeData.user);\n      setPermissions(storeData.user.Permissions);\n      setRole(storeData.user.Role);\n    }\n\n    fetchData();\n  }, [storeData]);\n\n  const logout = async () => {\n    dispatch({\n      type: \"LOGOUT\",\n      payload: {}\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Movies - Subscriptions Web Site \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), \"Welcome \", user.userName, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 31\n    }, this), permissions && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [permissions.includes(\"View Movies\") && /*#__PURE__*/_jsxDEV(\"button\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/movies\",\n          children: \"All Movies\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 12\n      }, this), permissions.includes(\"View Subscriptions\") && /*#__PURE__*/_jsxDEV(\"button\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/members\",\n          children: \"All Memebers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 14\n      }, this), Role === \"admin\" && /*#__PURE__*/_jsxDEV(\"button\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/users\",\n          children: \"Users Management\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          onClick: logout,\n          children: \"Log Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 18\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/\",\n        component: LoginComp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        component: LoginComp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/movies\",\n        component: AllMoviesComp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/members\",\n        component: AllMembersComp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/users\",\n        component: AllUsersComp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MainComp, \"0hnuG/XWGKuxdqhpLOje8BC2XMo=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = MainComp;\nexport default MainComp;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainComp\");","map":{"version":3,"sources":["C:/Users/User/FullStack/fullStack1/fullstack/src/views/main.js"],"names":["Switch","Route","Link","useState","useSelector","useEffect","axios","LoginComp","AllMembersComp","AllMoviesComp","AllUsersComp","useDispatch","memberUtils","MainComp","user","setUser","Role","setRole","permissions","setPermissions","dispatch","storeData","state","fetchData","allMembers","type","payload","allMovies","moviesUtils","Permissions","logout","userName","includes"],"mappings":"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","sourcesContent":["import { Switch, Route, Link } from 'react-router-dom';\r\nimport { useState } from 'react'\r\nimport { useSelector } from \"react-redux\";\r\nimport { useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport LoginComp from './login';\r\nimport AllMembersComp from './AllMembers';\r\nimport AllMoviesComp from './AllMovies';\r\nimport AllUsersComp from './UsersManagement';\r\nimport { useDispatch } from \"react-redux\";\r\nimport memberUtils from '../utils/membersUtils'\r\n\r\nfunction MainComp() {\r\n\r\n  const [user, setUser] = useState({})\r\n  const [Role, setRole] = useState('')\r\n  const [permissions, setPermissions] = useState([])\r\n  const dispatch = useDispatch()\r\n  const storeData = useSelector(state => state)\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      let allMembers =await memberUtils.allMembers();\r\n      dispatch({type : \"MEMBERS\" , payload :allMembers})\r\n\r\n      let allMovies =await moviesUtils.allMovies();\r\n      dispatch({type : \"MOVIES\" , payload :allMovies})\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n    setUser(storeData.user)\r\n    setPermissions(storeData.user.Permissions)\r\n    setRole(storeData.user.Role)}\r\n    fetchData();\r\n  },[storeData]);\r\n\r\n  const logout=async() =>{\r\n      dispatch({type : \"LOGOUT\" , payload : {}})\r\n}\r\n\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <h1>Movies - Subscriptions Web Site </h1>\r\n      Welcome {user.userName} <br/>\r\n      {permissions &&\r\n        <div>\r\n          {\r\n            permissions.includes(\"View Movies\") &&\r\n           <button><Link to=\"/movies\">All Movies</Link></button> \r\n          }\r\n          {permissions.includes(\"View Subscriptions\") &&\r\n             <button><Link to=\"/members\">All Memebers</Link></button>}\r\n\r\n          {Role === \"admin\" &&\r\n           <button><Link to=\"/users\">Users Management</Link></button> \r\n          }\r\n         <button><Link to=\"/\" onClick={logout}>Log Out</Link></button> \r\n        </div>\r\n      }\r\n\r\n    <Switch>\r\n            <Route exact path=\"/\" component={LoginComp} />\r\n            <Route path=\"/login\" component={LoginComp} />\r\n            <Route path=\"/movies\" component={AllMoviesComp} />\r\n            <Route path=\"/members\" component={AllMembersComp} />\r\n            <Route path=\"/users\" component={AllUsersComp} />\r\n        </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainComp;\r\n"]},"metadata":{},"sourceType":"module"}
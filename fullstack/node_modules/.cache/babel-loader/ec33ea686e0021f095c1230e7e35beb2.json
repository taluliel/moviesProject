{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\FullStack\\\\fullStack1\\\\fullstack\\\\src\\\\views\\\\main.js\",\n    _s = $RefreshSig$();\n\nimport { Switch, Route, Link, useLocation } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport axios from \"axios\";\nimport LoginComp from \"./login\";\nimport AllMembersComp from \"./AllMembers\";\nimport AllMoviesComp from \"./AllMovies\";\nimport moviesUtils from \"../utils/moviesUtils\";\nimport AllUsersComp from \"./UsersManagement\";\nimport CreateAccountComp from \"./CreateAccount\";\nimport MemberComp from \"./Member\";\nimport MovieComp from \"./Movie\";\nimport { Box, Tabs, Tab, Paper, ImageList, ImageListItem } from \"@material-ui/core\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MainComp() {\n  _s();\n\n  const [user, setUser] = useState({\n    userData: {},\n    permissions: [],\n    Role: \"\"\n  });\n  const dispatch = useDispatch();\n  const storeData = useSelector(state => state);\n  const [value, setValue] = useState(0);\n  const location = useLocation();\n  const [movies, setMovies] = useState([]);\n  useEffect(() => {\n    async function fetchData() {\n      await axios.get(\"http://localhost:8000/api/main\");\n    }\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    async function fetchData() {\n      let allMovies = await moviesUtils.allMovies();\n      setMovies(allMovies.splice(0, 12));\n    }\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    async function fetchData() {\n      setUser({ ...user,\n        userData: storeData.user,\n        permissions: storeData.user.Permissions,\n        Role: storeData.user.Role\n      });\n    }\n\n    fetchData();\n  }, [storeData]);\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Movies - Subscriptions Web Site \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), \"Welcome \", user.userData.userName, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 40\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        Width: \"100%\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        children: /*#__PURE__*/_jsxDEV(Tabs, {\n          value: value,\n          onChange: handleChange,\n          centered: true,\n          children: user.permissions && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [user.permissions.includes(\"View Movies\") && /*#__PURE__*/_jsxDEV(Tab, {\n              label: \"All Movies\",\n              to: \"/movies\",\n              component: Link\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 19\n            }, this), user.permissions.includes(\"View Subscriptions\") && /*#__PURE__*/_jsxDEV(Tab, {\n              label: \"All Memebers\",\n              to: \"/members\",\n              component: Link\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 19\n            }, this), user.Role === \"admin\" && /*#__PURE__*/_jsxDEV(Tab, {\n              label: \"Users Management\",\n              to: \"/users\",\n              component: Link\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Tab, {\n              label: \"Log Out\",\n              to: \"/\",\n              component: Link,\n              onClick: () => dispatch({\n                type: \"LOGOUT\",\n                payload: {}\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), location.pathname == \"/main\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(ImageList, {\n        variant: \"woven\",\n        cols: 3,\n        gap: 8,\n        children: movies.map(item => /*#__PURE__*/_jsxDEV(ImageListItem, {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            height: \"180\",\n            src: `${item.Image}?w=164&h=164&fit=crop&auto=format`,\n            srcSet: `${item.Image}?w=164&h=164&fit=crop&auto=format&dpr=2 2x`,\n            alt: item.Name,\n            loading: \"lazy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this)\n        }, item._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 12\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/\",\n        component: LoginComp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        component: LoginComp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/CreateAccount\",\n        component: CreateAccountComp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/movies\",\n        component: AllMoviesComp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/members\",\n        component: AllMembersComp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/member/:id\",\n        component: MemberComp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/movie/:id\",\n        component: MovieComp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/users\",\n        component: AllUsersComp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MainComp, \"X/bWcw+m7nb7kEso4vuwE4ztniQ=\", false, function () {\n  return [useDispatch, useSelector, useLocation];\n});\n\n_c = MainComp;\nexport default MainComp;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainComp\");","map":{"version":3,"sources":["C:/Users/User/FullStack/fullStack1/fullstack/src/views/main.js"],"names":["Switch","Route","Link","useLocation","useState","useEffect","useSelector","useDispatch","axios","LoginComp","AllMembersComp","AllMoviesComp","moviesUtils","AllUsersComp","CreateAccountComp","MemberComp","MovieComp","Box","Tabs","Tab","Paper","ImageList","ImageListItem","MainComp","user","setUser","userData","permissions","Role","dispatch","storeData","state","value","setValue","location","movies","setMovies","fetchData","get","allMovies","splice","Permissions","handleChange","event","newValue","userName","Width","includes","type","payload","pathname","map","item","Image","Name","_id"],"mappings":"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","sourcesContent":["import { Switch, Route, Link, useLocation } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport LoginComp from \"./login\";\r\nimport AllMembersComp from \"./AllMembers\";\r\nimport AllMoviesComp from \"./AllMovies\";\r\nimport moviesUtils from \"../utils/moviesUtils\";\r\nimport AllUsersComp from \"./UsersManagement\";\r\nimport CreateAccountComp from \"./CreateAccount\";\r\nimport MemberComp from \"./Member\";\r\nimport MovieComp from \"./Movie\";\r\nimport {\r\n  Box,\r\n  Tabs,\r\n  Tab,\r\n  Paper,\r\n  ImageList,\r\n  ImageListItem,\r\n} from \"@material-ui/core\";\r\n\r\nfunction MainComp() {\r\n  const [user, setUser] = useState({ userData: {}, permissions: [], Role: \"\" });\r\n  const dispatch = useDispatch();\r\n  const storeData = useSelector((state) => state);\r\n  const [value, setValue] = useState(0);\r\n  const location = useLocation();\r\n  const [movies, setMovies] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      await axios.get(\"http://localhost:8000/api/main\");\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      let allMovies = await moviesUtils.allMovies();\r\n      setMovies(allMovies.splice(0, 12));\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      setUser({\r\n        ...user,\r\n        userData: storeData.user,\r\n        permissions: storeData.user.Permissions,\r\n        Role: storeData.user.Role,\r\n      });\r\n    }\r\n    fetchData();\r\n  }, [storeData]);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <h2>Movies - Subscriptions Web Site </h2>\r\n      Welcome {user.userData.userName} <br />\r\n      <Box sx={{ Width: \"100%\" }}>\r\n        <Paper>\r\n          <Tabs value={value} onChange={handleChange} centered>\r\n            {user.permissions && (\r\n              <div>\r\n                {user.permissions.includes(\"View Movies\") && (\r\n                  <Tab label=\"All Movies\" to=\"/movies\" component={Link} />\r\n                )}\r\n                {user.permissions.includes(\"View Subscriptions\") && (\r\n                  <Tab label=\"All Memebers\" to=\"/members\" component={Link} />\r\n                )}\r\n\r\n                {user.Role === \"admin\" && (\r\n                  <Tab label=\"Users Management\" to=\"/users\" component={Link} />\r\n                )}\r\n\r\n                <Tab\r\n                  label=\"Log Out\"\r\n                  to=\"/\"\r\n                  component={Link}\r\n                  onClick={() => dispatch({ type: \"LOGOUT\", payload: {} })}\r\n                />\r\n              </div>\r\n            )}\r\n          </Tabs>\r\n        </Paper>\r\n      </Box>\r\n      {location.pathname == \"/main\" && (\r\n        <div>\r\n           <ImageList variant=\"woven\" cols={3} gap={8}>\r\n            {movies.map((item) => (\r\n              <ImageListItem key={item._id}>\r\n                <img   height=\"180\"\r\n                  src={`${item.Image}?w=164&h=164&fit=crop&auto=format`}\r\n                  srcSet={`${item.Image}?w=164&h=164&fit=crop&auto=format&dpr=2 2x`}\r\n                  alt={item.Name}\r\n                  loading=\"lazy\"\r\n                />\r\n              </ImageListItem>\r\n            ))}\r\n          </ImageList>\r\n        </div>\r\n      )}\r\n      <Switch>\r\n        <Route exact path=\"/\" component={LoginComp} />\r\n        <Route path=\"/login\" component={LoginComp} />\r\n        <Route path=\"/CreateAccount\" component={CreateAccountComp} />\r\n        <Route path=\"/movies\" component={AllMoviesComp} />\r\n        <Route path=\"/members\" component={AllMembersComp} />\r\n        <Route path=\"/member/:id\" component={MemberComp} />\r\n        <Route path=\"/movie/:id\" component={MovieComp} />\r\n        <Route path=\"/users\" component={AllUsersComp} />\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainComp;\r\n"]},"metadata":{},"sourceType":"module"}
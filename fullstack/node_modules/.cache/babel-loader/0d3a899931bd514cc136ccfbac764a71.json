{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\FullStack\\\\fullStack1\\\\fullstack\\\\src\\\\views\\\\Movie.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport moviesUtils from \"../utils/moviesUtils\";\nimport subscriptionsUtils from \"../utils/subscriptionsUtils\";\nimport { useSelector } from \"react-redux\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport memberUtils from \"../utils/membersUtils\";\nimport Card from \"@mui/material/Card\";\nimport CardActions from \"@mui/material/CardActions\";\nimport CardContent from \"@mui/material/CardContent\";\nimport Button from \"@mui/material/Button\";\nimport Typography from \"@mui/material/Typography\";\nimport Input from \"@mui/material/Input\";\nimport Container from \"@mui/material/Container\";\nimport PersonOutlineTwoToneIcon from \"@mui/icons-material/PersonOutlineTwoTone\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MovieComp = props => {\n  _s();\n\n  const [movie, setMovie] = useState({});\n  const [members, setMemebers] = useState([]);\n  const [subscriptions, setSubscriptions] = useState([]);\n  const [editMovie, setEditMovie] = useState(false);\n  const [updatedMovie, setUpdatedMovie] = useState({});\n  const permissions = useSelector(state => state.user.Permissions);\n  const navigate = useNavigate();\n  useEffect(() => {\n    async function fetchData() {\n      let allMembers = await memberUtils.allMembers();\n      setMemebers(allMembers);\n      let id = props.movie ? props.movie._id : props.match.params.id;\n      let subscriptionsData = await subscriptionsUtils.getSubscriptionsByMovie(id);\n      setSubscriptions(subscriptionsData);\n    }\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    async function fetchData() {\n      if (props.movie) {\n        setMovie(props.movie);\n      } else {\n        let movie = await moviesUtils.getMovie(props.match.params.id);\n        setMovie(movie);\n      }\n    }\n\n    fetchData();\n  }, [props]);\n\n  const deleteMovie = async () => {\n    let movieDeleted = await moviesUtils.deleteMovie(movie._id);\n    props.updateMovies(movieDeleted);\n    navigate(\"/movies\");\n  };\n\n  const sendData = async () => {\n    await moviesUtils.EditMovie(movie._id, updatedMovie);\n    setEditMovie(!editMovie);\n    props.updateMovies(movieDeleted);\n    navigate(\"/movies\");\n  };\n\n  const getMemberName = id => {\n    let memberData = members.filter(x => x._id === id);\n    return memberData[0].Name;\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    children: /*#__PURE__*/_jsxDEV(CardContent, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"400px\",\n          borderWidth: \"3px\",\n          borderStyle: \"solid\",\n          borderColor: \"gray\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          gutterBottom: true,\n          variant: \"h6\",\n          component: \"div\",\n          children: [movie.Name, \", \", movie.Premiered]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), movie.Genres && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Genres: \", movie.Genres.toString(), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 22\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            alt: movie.id,\n            width: \"140px\",\n            height: \"200px\",\n            src: movie.Image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: subscriptions.length > 0 && /*#__PURE__*/_jsxDEV(Container, {\n            component: \"span\",\n            sx: {\n              border: \"1px dashed grey\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \" Subscriptions Watched : \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 17\n            }, this), subscriptions.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(PersonOutlineTwoToneIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/member/\" + item.MemberId,\n                  children: getMemberName(item.MemberId)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 23\n                }, this), \",\", item.Movies.date, \" \"]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 21\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n          children: [permissions.includes(\"Update Movies\") && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              variant: \"outlined\",\n              onClick: e => setEditMovie(!editMovie),\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this), permissions.includes(\"Delete Movies\") && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              variant: \"outlined\",\n              color: \"error\",\n              onClick: deleteMovie,\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: editMovie && /*#__PURE__*/_jsxDEV(Container, {\n            component: \"span\",\n            sx: {\n              p: 2,\n              border: \"1px dashed grey\"\n            },\n            children: [\"Name :\", \" \", /*#__PURE__*/_jsxDEV(Input, {\n              size: \"small\",\n              name: \"Name\",\n              defaultValue: movie.Name,\n              onChange: e => setUpdatedMovie({ ...updatedMovie,\n                Name: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 17\n            }, this), \"Genres :\", \" \", /*#__PURE__*/_jsxDEV(Input, {\n              size: \"small\",\n              name: \" Genres\",\n              defaultValue: movie.Genres,\n              onChange: e => setUpdatedMovie({ ...updatedMovie,\n                Genres: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 17\n            }, this), \"Image URL :\", \" \", /*#__PURE__*/_jsxDEV(Input, {\n              size: \"small\",\n              name: \"Image\",\n              defaultValue: movie.Image,\n              onChange: e => setUpdatedMovie({ ...updatedMovie,\n                Image: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 17\n            }, this), \"Premiered :\", \" \", /*#__PURE__*/_jsxDEV(Input, {\n              size: \"small\",\n              type: \"date\",\n              name: \"Premiered\",\n              disabled: true,\n              value: movie.Premiered,\n              onChange: e => setUpdatedMovie({ ...updatedMovie,\n                Premiered: movie.Premiered\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              color: \"success\",\n              variant: \"outlined\",\n              onClick: sendData,\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              color: \"inherit\",\n              size: \"small\",\n              onClick: e => setEditMovie(!editMovie),\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MovieComp, \"DAg9VFLU1skB35PO6iwSvE6gAK4=\", false, function () {\n  return [useSelector, useNavigate];\n});\n\n_c = MovieComp;\nexport default MovieComp;\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieComp\");","map":{"version":3,"sources":["C:/Users/User/FullStack/fullStack1/fullstack/src/views/Movie.js"],"names":["useState","useEffect","moviesUtils","subscriptionsUtils","useSelector","useNavigate","Link","memberUtils","Card","CardActions","CardContent","Button","Typography","Input","Container","PersonOutlineTwoToneIcon","MovieComp","props","movie","setMovie","members","setMemebers","subscriptions","setSubscriptions","editMovie","setEditMovie","updatedMovie","setUpdatedMovie","permissions","state","user","Permissions","navigate","fetchData","allMembers","id","_id","match","params","subscriptionsData","getSubscriptionsByMovie","getMovie","deleteMovie","movieDeleted","updateMovies","sendData","EditMovie","getMemberName","memberData","filter","x","Name","width","borderWidth","borderStyle","borderColor","Premiered","Genres","toString","Image","length","border","map","item","index","MemberId","Movies","date","includes","e","p","target","value"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport moviesUtils from \"../utils/moviesUtils\";\r\nimport subscriptionsUtils from \"../utils/subscriptionsUtils\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport memberUtils from \"../utils/membersUtils\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Input from \"@mui/material/Input\";\r\nimport Container from \"@mui/material/Container\";\r\nimport PersonOutlineTwoToneIcon from \"@mui/icons-material/PersonOutlineTwoTone\";\r\n\r\nconst MovieComp = (props) => {\r\n  const [movie, setMovie] = useState({});\r\n  const [members, setMemebers] = useState([]);\r\n  const [subscriptions, setSubscriptions] = useState([]);\r\n  const [editMovie, setEditMovie] = useState(false);\r\n  const [updatedMovie, setUpdatedMovie] = useState({});\r\n  const permissions = useSelector((state) => state.user.Permissions);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      let allMembers = await memberUtils.allMembers();\r\n      setMemebers(allMembers);\r\n      let id = props.movie ? props.movie._id : props.match.params.id;\r\n      let subscriptionsData = await subscriptionsUtils.getSubscriptionsByMovie(\r\n        id\r\n      );\r\n      setSubscriptions(subscriptionsData);\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      if (props.movie) {\r\n        setMovie(props.movie);\r\n      } else {\r\n        let movie = await moviesUtils.getMovie(props.match.params.id);\r\n        setMovie(movie);\r\n      }\r\n    }\r\n    fetchData();\r\n  }, [props]);\r\n\r\n  const deleteMovie = async () => {\r\n    let movieDeleted = await moviesUtils.deleteMovie(movie._id);\r\n    props.updateMovies(movieDeleted);\r\n    navigate(\"/movies\");\r\n  };\r\n\r\n  const sendData = async () => {\r\n    await moviesUtils.EditMovie(movie._id, updatedMovie);\r\n    setEditMovie(!editMovie);\r\n    props.updateMovies(movieDeleted);\r\n    navigate(\"/movies\");\r\n  };\r\n\r\n  const getMemberName = (id) => {\r\n    let memberData = members.filter((x) => x._id === id);\r\n    return memberData[0].Name;\r\n  };\r\n\r\n  return (\r\n    <Card>\r\n      <CardContent>\r\n        <div\r\n          style={{\r\n            width: \"400px\",\r\n            borderWidth: \"3px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"gray\",\r\n          }}\r\n        >\r\n          <Typography gutterBottom variant=\"h6\" component=\"div\">\r\n            {movie.Name}, {movie.Premiered}\r\n          </Typography>\r\n\r\n          {movie.Genres && (\r\n            <div>\r\n              Genres: {movie.Genres.toString()}\r\n              <br /> <br />\r\n              <img\r\n                alt={movie.id}\r\n                width=\"140px\"\r\n                height=\"200px\"\r\n                src={movie.Image}\r\n              />\r\n              <br />\r\n            </div>\r\n          )}\r\n\r\n          <div>\r\n            {subscriptions.length > 0 && (\r\n              <Container component=\"span\" sx={{ border: \"1px dashed grey\" }}>\r\n                <h4> Subscriptions Watched : </h4>\r\n                {subscriptions.map((item, index) => {\r\n                  return (\r\n                    <div key={index}>\r\n                      <PersonOutlineTwoToneIcon />\r\n                      <Link to={\"/member/\" + item.MemberId}>\r\n                        {getMemberName(item.MemberId)}\r\n                      </Link>\r\n                      ,{item.Movies.date}{\" \"}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </Container>\r\n            )}\r\n          </div>\r\n\r\n          <CardActions>\r\n            {permissions.includes(\"Update Movies\") && (\r\n              <div>\r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  onClick={(e) => setEditMovie(!editMovie)}\r\n                >\r\n                  Edit\r\n                </Button>\r\n              </div>\r\n            )}\r\n            {permissions.includes(\"Delete Movies\") && (\r\n              <div>\r\n                <Button\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  color=\"error\"\r\n                  onClick={deleteMovie}\r\n                >\r\n                  Delete\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </CardActions>\r\n          <div>\r\n            {editMovie && (\r\n              <Container\r\n                component=\"span\"\r\n                sx={{ p: 2, border: \"1px dashed grey\" }}\r\n              >\r\n                Name :{\" \"}\r\n                <Input\r\n                  size=\"small\"\r\n                  name=\"Name\"\r\n                  defaultValue={movie.Name}\r\n                  onChange={(e) =>\r\n                    setUpdatedMovie({ ...updatedMovie, Name: e.target.value })\r\n                  }\r\n                />{\" \"}\r\n                <br />\r\n                Genres :{\" \"}\r\n                <Input\r\n                  size=\"small\"\r\n                  name=\" Genres\"\r\n                  defaultValue={movie.Genres}\r\n                  onChange={(e) =>\r\n                    setUpdatedMovie({ ...updatedMovie, Genres: e.target.value })\r\n                  }\r\n                />\r\n                <br />\r\n                Image URL :{\" \"}\r\n                <Input\r\n                  size=\"small\"\r\n                  name=\"Image\"\r\n                  defaultValue={movie.Image}\r\n                  onChange={(e) =>\r\n                    setUpdatedMovie({ ...updatedMovie, Image: e.target.value })\r\n                  }\r\n                />\r\n                <br />\r\n                Premiered :{\" \"}\r\n                <Input\r\n                  size=\"small\"\r\n                  type=\"date\"\r\n                  name=\"Premiered\"\r\n                  disabled\r\n                  value={movie.Premiered}\r\n                  onChange={(e) =>\r\n                    setUpdatedMovie({\r\n                      ...updatedMovie,\r\n                      Premiered: movie.Premiered,\r\n                    })\r\n                  }\r\n                />\r\n                <br />\r\n                <br />\r\n                <Button\r\n                  size=\"small\"\r\n                  color=\"success\"\r\n                  variant=\"outlined\"\r\n                  onClick={sendData}\r\n                >\r\n                  Save\r\n                </Button>\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  color=\"inherit\"\r\n                  size=\"small\"\r\n                  onClick={(e) => setEditMovie(!editMovie)}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n              </Container>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default MovieComp;\r\n"]},"metadata":{},"sourceType":"module"}